<head>
<title>Go Getting Started on Heroku</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/main.css" />
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap.min.css"/>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"/>
  <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>
  <script>
    $(document).ready(function() {
        $("nav li a[href='"+window.location.pathname+"'").parent().addClass('active');

        if (window.location.pathname == '/leeches/screensaver') {
            $('nav').addClass('hiding');
            
            var navHideTimeoutId;
            $('.screensaver').mousemove(function() {
                $("nav").removeClass('hiding');
                window.clearTimeout(navHideTimeoutId);

                navHideTimeoutId = setTimeout(function() {
                    $("nav").addClass('hiding');
                }, 3000);
            });

            var lastId;
            function animate() {
                var id;
                var leeches = $('.leech');
                while(true) {
                    var index = Math.trunc(Math.random()*leeches.length);
                    id = leeches.get(index).id;
                    if (id != lastId) {
                        break;
                    }
                }

                $('.leech').removeClass('active');
                $('#'+id).addClass('active').css('left', Math.random()*500).css('top', Math.random()*500);;
                lastId = id;
            };

            animate();
            setInterval(function() {
                animate();
            }, 20000);            
        }
    });
  </script>
</head>
